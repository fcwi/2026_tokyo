# 天氣判斷增強 - 雷雨與多霧功能

## 修改概述
已成功在應用程序中添加了**雷雨**和**多霧**天氣判斷功能，包含相應的視覺特效。

## 修改詳情

### 1. Particle 類別擴展
**文件**: `src/App.jsx` (第 94-217 行)

- **新增 `fog` 粒子類型**
  - 在 `reset()` 方法中：設定霧氣顆粒的位置、速度、大小及透明度
  - 在 `update()` 方法中：更新霧氣位置及透明度變化（漸進/漸退效果）
  - 在 `draw()` 方法中：使用放射狀梯度繪製柔和的霧氣效果

- **新增 `lightning` 粒子類型**
  - 在 `reset()` 方法中：設定閃電的起始時間、持續時間及位置
  - 在 `update()` 方法中：管理閃電的動畫週期（閃現後等待 2 秒後重新生成）
  - 在 `draw()` 方法中：繪製鋸齒狀閃電，具有漸進式褪色效果

### 2. WeatherParticles 組件更新
**文件**: `src/App.jsx` (第 245 行)

- 更新粒子計數邏輯，為新的天氣類型分配適當數量：
  - `fog`: 30 個霧顆粒
  - `lightning`: 8 個閃電

### 3. getParticleType 函數重構
**文件**: `src/App.jsx` (第 3296-3310 行)

- **多霧** (代碼 45, 48): 返回 `"fog"` 特效
- **雷雨** (代碼 95, 96, 99): 返回 `"lightning"` 特效
- **一般下雨** (代碼 51, 53, 55, 61, 63, 65, 80, 81, 82): 繼續返回 `"rain"` 特效
- 其他天氣類型保持不變

### 4. getSkyCondition 函數更新
**文件**: `src/App.jsx` (第 3312-3320 行)

- 添加 `fog` 判斷：代碼 45, 48 返回 `"fog"`
- 添加 `thunderstorm` 判斷：代碼 95, 96, 99 返回 `"thunderstorm"`
- 其他天氣類型的判斷保持不變

### 5. 背景色動態判斷邏輯
**文件**: `src/App.jsx` (第 3350-3381 行)

新增四個新的天氣判斷變數：
- `isFoggy`: 多霧判斷
- `isThunderstorm`: 雷雨判斷
- 分離 `isRaining`: 僅包含非雷雨的下雨代碼
- 調整 `isCloudy`: 移除多霧代碼 45, 48

**背景色設定**：
- **雷雨** (白天): `#4a5568` (深灰黑色) - 表示危險
- **下雨** (白天): `#94a3b8` (深藍灰色)
- **下雪** (白天): `#94a3b8` (深藍灰色)
- **多霧** (白天): `#c7d2e0` (霧白色)
- **多雲** (白天): `#cbd5e1` (淺灰色)

## 現有天氣圖示和說明
已存在的 `getWeatherInfo` 和 `getWeatherData` 函數已正確支援：

| 天氣類型 | 代碼 | 圖示 | 說明 | 建議 |
|---------|------|------|------|------|
| 晴朗 | 0 | ☀️ Sun | 晴朗 | 天氣很好，注意防曬。 |
| 多雲 | 1,2,3 | ☁️ Cloud | 多雲 | 舒適，適合戶外。 |
| **多霧** | **45,48** | **🌫️ CloudFog** | **有霧** | **能見度低請小心。** |
| 下雨 | 51,53,55,61,63,65,80,81,82 | 🌧️ CloudRain | 有雨 | 請務必攜帶雨具。 |
| 下雪 | 71,73,75,77,85,86 | ❄️ Snowflake | 降雪 | 請穿防滑雪靴。 |
| **雷雨** | **95,96,99** | **⚡ CloudLightning** | **雷雨** | **請盡量待在室內。** |

## 視覺特效總結

| 特效類型 | 觸發條件 | 視覺表現 | 粒子數 |
|---------|---------|---------|--------|
| **霧** | 多霧 (45,48) | 柔和的放射狀灰色顆粒，浮動漂移 | 30 |
| **閃電** | 雷雨 (95,96,99) | 鋸齒狀黃白色閃電，黃色光芒漸褪，週期性閃現 | 8 |
| 雨 | 下雨 (51-82) | 藍色雨滴（白天）/白色雨滴（晚上） | 150 |
| 雪 | 下雪 (71-86) | 白色雪花片 | 80 |
| 星星 | 晴朗且晚上 (0 + 夜間) | 白色閃爍星星 | 100 |

## 測試建議

1. **多霧天氣測試**
   - 使用天氣代碼 45 或 48
   - 驗證霧特效是否顯示（浮動的灰色顆粒）
   - 檢查背景色是否為 `#c7d2e0`
   - 確認天氣圖示顯示 CloudFog

2. **雷雨天氣測試**
   - 使用天氣代碼 95、96 或 99
   - 驗證閃電特效是否顯示（鋸齒狀閃電）
   - 檢查背景色是否為 `#4a5568`
   - 確認天氣圖示顯示 CloudLightning

3. **集成測試**
   - 在不同天氣條件間切換
   - 驗證特效平順過渡
   - 檢查性能是否正常

## 文件修改統計
- **修改文件數**: 1
- **修改的主要函數**: 5
- **新增粒子類型**: 2
- **新增顏色配置**: 2
