# 🧪 快速測試凍結功能指南

## ⚡️ 30 秒快速測試

### 步驟 1: 啟動測試模式（5 秒）
```
1. 在應用主頁面上找到右上角的 Key 圖示（🔑）
2. 快速點擊 10 次
3. TestModePanel 會從下方滑上來
```

### 步驟 2: 修改時間（10 秒）
```
1. 在「日期與時間」區域，點擊日期輸入框
2. 選擇 2026-01-27（或任何日期）
3. 確認時間也改變了
```

### 步驟 3: 儲存並凍結（5 秒）
```
1. 點擊綠色「儲存變更」按鈕
2. 點擊黃色「🔒 凍結設定」按鈕
3. 看到藍色橫幅「🔒 測試設定已凍結」
4. 按鈕變成藍色「🔓 解凍設定」
```

### 步驟 4: 驗證凍結有效（10 秒）
```
1. 點擊 TestModePanel 右上角 X 關閉面板
2. 導航到不同的日期/頁面
3. 重新打開測試模式（點擊 Key 10 次）
4. ✅ 確認日期仍是 2026-01-27
5. ✅ 確認時間仍是之前設定的時間
```

## 🎯 詳細測試場景

### 場景 A: 時間凍結驗證

**目的**: 驗證凍結時間在其他操作後保持不變

```
預期行為：
✅ 設定時間為 2026/1/27 → 儲存 → 凍結
✅ 導航到不同天數頁面
✅ 返回總覽頁面
✅ 時間顯示仍為「Day 3」而非原始日期

如果不成功：
❌ 時間被重置為當前日期
❌ 只修改了 tempDateTime 但沒點「儲存變更」
❌ 凍結按鈕沒有變藍色（說明沒有真正凍結）
```

### 場景 B: 天氣凍結驗證

**目的**: 驗證凍結天氣在其他操作後保持不變

```
預期行為：
✅ 為總覽選擇天氣代碼 71（下雪）
✅ 點擊「儲存變更」
✅ 點擊「🔒 凍結設定」
✅ 關閉 TestModePanel
✅ 觀察背景會有雪花特效
✅ 打開其他面板後重新關閉
✅ ✅ 背景仍然有雪花特效（未被覆蓋）

如果不成功：
❌ 雪花特效消失（天氣被重置）
❌ Console 中沒有「應用凍結總覽天氣覆蓋」日誌
❌ 背景特效使用的是舊天氣值
```

### 場景 C: 解凍驗證

**目的**: 驗證解凍後恢復動態更新

```
預期行為：
✅ 確認設定已凍結（藍色提示橫幅）
✅ 點擊「🔓 解凍設定」按鈕
✅ 藍色橫幅消失
✅ 按鈕變回黃色「🔒 凍結設定」
✅ 現在修改值會立即被覆蓋（恢復舊行為）
✅ Console 中出現「解凍測試設定」日誌

如果不成功：
❌ 按鈕沒有變回黃色
❌ 橫幅仍然顯示
❌ 設定仍然被凍結
```

## 🔍 Console 日誌查看指南

### 打開開發者工具
```
Windows/Linux: F12
Mac: Cmd + Option + I
```

### 查找相關日誌
```
筆選擇 Console 標籤
在搜索框中輸入 🔒 或 🧪 找尋相關日誌
應該看到：

✅ 🔒 凍結測試設定 - dateTime=...
✅ 🧪 行程狀態計算 - isFrozen=true
✅ 🧪 應用凍結總覽天氣覆蓋: 71
✅ 🔓 解凍測試設定
```

## ⚠️ 常見問題診斷

### 問題 1: 凍結後時間仍被重置
```
診斷步驟：
1. 打開 Console（F12）
2. 修改日期
3. 查看是否有「🔒 凍結測試設定」日誌
4. 導航後查看是否有「isFrozen=true」日誌

如果沒有凍結日誌：
❌ 可能沒有點擊「儲存變更」按鈕
❌ 可能沒有點擊「🔒 凍結設定」按鈕
❌ 可能點擊但按鈕沒變藍色

修復：重新點擊「儲存變更」然後「🔒 凍結設定」
```

### 問題 2: 看不到藍色提示橫幅
```
可能原因：
1. 凍結沒有成功 → 檢查點擊了 3 個地方：
   - 修改時間
   - 點擊「儲存變更」（綠色）
   - 點擊「🔒 凍結設定」（黃色）

2. TestModePanel 被其他元素覆蓋
   → 檢查視窗大小，嘗試滾動面板

3. 主題色衝突
   → 切換深色/淺色模式後重試
```

### 問題 3: 天氣特效看不到雪花
```
可能原因：
1. 天氣代碼錯誤 → 71 是下雪，試試其他代碼：
   - 0: 晴朗
   - 51/53/55: 小雨
   - 71/73/75: 下雪
   - 95/96/99: 雷雨

2. 天氣沒有保存 → 確認點擊「儲存變更」後看到 Toast 提示

3. 背景已被其他值覆蓋
   → 檢查 isFrozen 是否為 true（Console 中查看）
```

## 📊 成功的標誌

### ✅ 綠色標誌（全部通過）
1. TestModePanel 頂部出現藍色「🔒 測試設定已凍結」橫幅
2. 凍結按鈕變為藍色且文案為「🔓 解凍設定」
3. 修改日期後，導航和其他操作不會改變日期
4. 修改天氣後，背景特效持續顯示不變
5. Console 中看到多個「isFrozen=true」日誌
6. 解凍後按鈕恢復黃色

### ❌ 紅色標誌（需要檢查）
1. 修改後點擊「儲存變更」沒有反應
2. 點擊「凍結設定」但按鈕沒變藍色
3. 設定被其他操作覆蓋
4. Console 沒有凍結相關日誌
5. 藍色橫幅沒有出現

## 📞 需要幫助？

1. 查看 Console 中的 🔒 和 🧪 日誌
2. 檢查 FREEZE_FEATURE_GUIDE.md 獲得完整文檔
3. 確認按鈕顏色變化（黃色 ↔️ 藍色）
4. 確認藍色橫幅出現/消失

---

**預計測試時間**: 3-5 分鐘
**所需工具**: 瀏覽器（支援 F12 開發者工具）
**成功機率**: 95%（如果按照步驟）
