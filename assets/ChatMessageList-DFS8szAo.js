import{R as v,j as e}from"./motion-vendor-B3aZs4py.js";import{as as N,at as d,an as y,r as k,s as $,Y as C}from"./icons-vendor-CN-IvRGQ.js";import"./react-vendor-DlBnNAMw.js";const E=({messages:i,isDarkMode:s,theme:c,currentTheme:x,renderMessage:h,handleSpeak:b,isLoading:u,loadingText:m,chatEndRef:g,setFullPreviewImage:w,expandedMessages:j={},toggleMessageExpand:p})=>{const r=x?.chatColors||{userBubble:{light:"bg-[#5D737E] text-white border-[#4A606A]",dark:"bg-sky-800 text-white border-sky-700"},modelBubble:{light:"bg-white/90 backdrop-blur-sm text-stone-700 border-stone-200",dark:"bg-neutral-800/90 backdrop-blur-sm text-neutral-200 border-neutral-700"},bg:{light:"bg-[#F9F9F6]/50",dark:"bg-black/20"}};return e.jsxs("div",{className:`flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 ${s?r.bg.dark:r.bg.light}`,children:[i.map((t,l)=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"flex-row-reverse":""}`,children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 flex-shrink-0",children:[e.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shadow-sm border
                ${t.role==="user"?s?"bg-sky-800 text-white border-sky-700":"bg-[#5D737E] text-white border-[#4A606A]":s?"bg-neutral-800 text-sky-300 border-neutral-700":"bg-white text-[#5D737E] border-stone-200"}`,children:t.role==="user"?e.jsx(N,{className:"w-5 h-5"}):e.jsx(d,{className:"w-5 h-5"})}),t.role==="model"&&e.jsx("button",{onClick:()=>b(t.text),className:`p-1 rounded-full transition-all ${s?"text-sky-300 hover:bg-neutral-700":"text-[#5D737E] hover:bg-stone-200"}`,title:"朗讀訊息",children:e.jsx(y,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"max-w-[75%] group relative transition-all duration-300",children:e.jsxs("div",{className:`p-3.5 rounded-2xl text-sm leading-relaxed whitespace-pre-wrap break-words shadow-sm border
                ${t.role==="user"?s?r.userBubble.dark+" rounded-tr-none":r.userBubble.light+" rounded-tr-none":s?r.modelBubble.dark+" rounded-tl-none":r.modelBubble.light+" rounded-tl-none"}`,children:[t.image&&e.jsx("img",{src:t.image,alt:"Sent Image",onClick:()=>w(t.image),className:"mb-2 max-w-full h-auto rounded-lg border border-white/20 shadow-sm object-cover cursor-zoom-in active:scale-95 transition-transform"}),(()=>{const a=t.text?.length||0,o=a>150,n=j[l],f=o&&!n;return e.jsxs("div",{children:[e.jsx("div",{className:f?"line-clamp-4":"",children:h(t.text)}),o&&e.jsx("button",{onClick:()=>p(l),className:`mt-2 flex items-center gap-1 text-xs font-medium transition-all hover:opacity-80 ${t.role==="user"?"text-white/90":s?"text-sky-400":"text-[#5D737E]"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-3.5 h-3.5"}),"收起"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-3.5 h-3.5"}),"展開完整內容 (",a," 字)"]})})]})})()]})})]},l)),u&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shadow-sm border ${s?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:e.jsx(d,{className:`w-5 h-5 ${s?"text-sky-300":"text-[#5D737E]"}`})}),e.jsxs("div",{className:`p-3 rounded-2xl rounded-tl-none border shadow-sm flex items-center gap-2 ${s?"bg-neutral-800/60 border-neutral-700":"bg-white/80 border-stone-200"}`,children:[e.jsx(C,{className:`w-4 h-4 animate-spin ${s?"text-sky-300":"text-[#5D737E]"}`}),e.jsx("span",{className:`text-xs ${c.textSec}`,children:m||"正在翻閱您的行程表..."})]})]}),e.jsx("div",{ref:g})]})},A=v.memo(E);export{A as default};
